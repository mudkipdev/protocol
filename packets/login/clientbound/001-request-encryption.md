# Request Encryption
| Direction   | State | ID     | Identifier        |
| ----------- | ----- | ------ | ----------------- |
| Clientbound | Login | `0x01` | `minecraft:hello` |

The Request Encryption packet initiates the secure connection handshake between client and server. This packet marks the beginning of Minecraft's session encryption protocol, which uses RSA encryption with a 1024-bit key for the initial key exchange, followed by AES symmetric encryption for the remainder of the session.

## Fields
| Field | Type | Description |
| ----- | ---- | ----------- |
| Server ID | String (20) | Appears to be empty. Legacy field kept for backwards compatibility. |
| Public Key Length | VarInt | Length of Public Key. |
| Public Key | Byte Array | The server's public key, in bytes. |
| Verify Token Length | VarInt | Length of Verify Token. Always 4 for Notchian servers. |
| Verify Token | Byte Array | A sequence of random bytes generated by the server. |
| Should authenticate | Boolean | Whether the client should attempt to authenticate through mojang servers. |

## Security Process
The encryption handshake follows a specific sequence. First, the server sends its public key along with a verification token. The client then generates a shared secret and encrypts both this secret and the verification token using the server's public key. After sending these encrypted values back to the server, both sides verify the token matches before enabling symmetric encryption using the shared secret.

## Authentication
Online-mode servers require authentication with Mojang's servers as part of this process. The authentication adds an additional layer of security by validating the player's session. Offline-mode servers may still use encryption for secure communication but skip the Mojang authentication step. This encryption system prevents various forms of attack, including man-in-the-middle attacks, session hijacking, and server spoofing. The shared secret, which forms the basis of the ongoing encryption, is never transmitted in plain text. Once encryption is established, all further communication between client and server is encrypted.